using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Collections;
using System.IO;

namespace ConsoleApplicationEASTER
{
    public class ClassFunctions : ClassMultipleIncome
 {
        public int Substract(int x, int y)
        {
            return x - y;
        }

        public int Multiply(int x, int y)
        {
            return x * y;
        }

        public int Add(int x, int y)
        {
            return x + y;
        }

        public int Divide(int x, int y)
        {
            return x / y;
        }
    }


 public class ClassUserActivity
    {
        public int inData1 { get; set; }
        public int inData2 { get; set; }
    }


    class Program
    {
        static void Menu(){
            Console.WriteLine("1. Multiplikation" +
               Environment.NewLine + "2. Additation" +
                 Environment.NewLine + "3. Division" +
                     Environment.NewLine + "4. Substraktion" +
                         Environment.NewLine + "5. Multi list" +
                             Environment.NewLine + "6. Exit");
        }

        static string tal1() {
            return "Tal 1: ";
        }
        static string tal2()
        {
            return "Tal 2: ";
        }


        public enum Operator{
            Multiplication = 1,
            Addition,
            Division,
            Substraction,
            MultipleAddition,
            Exit
    }


        static void Main(string[] args)
        {
            Menu();

            int OperatorInt = Int32.Parse(Console.ReadLine());
            Operator IncomeInteger = (Operator)OperatorInt;
            

                Console.Clear();
                Console.WriteLine("**En simpel miniräknare**");

                //Get instance
                ClassUserActivity userInput = new ClassUserActivity();
                ClassDisplayCalculator display = new ClassDisplayCalculator();
                
                Console.WriteLine();
                switch (IncomeInteger)
                {
                    case Operator.Multiplication:
                        Console.WriteLine("Case1 - Multiplikation");
                        Console.WriteLine("Skriv in två heltal.");
                        
                                    Console.Write(tal1());
                                    userInput.inData1 = Convert.ToInt32(Console.ReadLine());
                                    Console.Write(tal2());
                                    userInput.inData2 = Convert.ToInt32(Console.ReadLine());

                                    //DisplayMultiplication
                                    display.DisplayMultiplication(userInput.inData1, userInput.inData2);
                                    Main(args);
                        break;

                    case Operator.Addition:
                                    Console.WriteLine("Case2 - Addition");
                                    Console.WriteLine("Skriv in två heltal.");
            
                                     Console.Write(tal1());
                                     userInput.inData1 = Convert.ToInt32(Console.ReadLine());
                                     Console.Write(tal2());
                                     userInput.inData2 = Convert.ToInt32(Console.ReadLine());
            
                                     //DisplayAddition
                                     display.DisplayAddition(userInput.inData1, userInput.inData2);
                                     Main(args);
                        break;

                    case Operator.Division:
                                    Console.WriteLine("Case3 - Division");
                                    Console.WriteLine("Skriv in två heltal.");
            
                                    Console.Write(tal1());
                                    userInput.inData1 = Convert.ToInt32(Console.ReadLine());
                                    Console.Write(tal2());
                                    userInput.inData2 = Convert.ToInt32(Console.ReadLine());
            
                                    //DisplayDivision
                                    display.DisplayDiv(userInput.inData1, userInput.inData2);
                                    Main(args);
                        break;

                    case Operator.Substraction:
                                    Console.WriteLine("Case4 - Substraktion");
                                    Console.WriteLine("Skriv in två heltal.");
            
                                    Console.Write(tal1());
                                    userInput.inData1 = Convert.ToInt32(Console.ReadLine());
                                    Console.Write(tal2());
                                    userInput.inData2 = Convert.ToInt32(Console.ReadLine());
            
                                    //DisplaySubstraction
                                    display.DisplaySub(userInput.inData1, userInput.inData2);
                                   Main(args);
                        break;

                    case Operator.MultipleAddition:
                                  Console.WriteLine("MULTI = Addition - Substraktion, Press Q for menu.");
                                  Console.WriteLine();
        
                                  int uInt;
                                //Do while if uInt is not null or "q"
                                      do
                                      {
                                          string uInput = Console.ReadLine();
                                          uInt = 0;
                                          display.DisplayMultipleIncome(uInput);
        
                                          int summaObject = 0;
                                          Console.WriteLine("*******");
                                          foreach (int obj in display)
                                          {
                                              summaObject += obj;
                                              Console.Write(" + {0}", obj);
                                          }
                                          Console.WriteLine("");
                                          Console.WriteLine("summaObject = {0}", summaObject);
                                      } while (uInt != null);
                        break;

                    case Operator.Exit:
                                Console.WriteLine("Du har tryckt noll!");
                                Environment.Exit(0);
                        break;
                }
            Console.ReadKey();
        }
    }



    //NOTIS!! -----  class UserActivity->MultipleIncome->Function->Display????? Korrekt?! Inheritence

 // Collection of tal objects. This class 
 // implements IEnumerable so that it can be used 
 // with ForEach syntax.
 public class ClassMultipleIncome {

    // Private members. 
     public List<ClassUserActivity> MultipleIncomeList = new List<ClassUserActivity>();

    // Public methods. //Add to list
    public void AddtoList(int x)
    {
        MultipleIncomeList.Add(new ClassUserActivity { inData1 = x });
    }

    public IEnumerator GetEnumerator()
    {
        foreach (ClassUserActivity obj in MultipleIncomeList)
        {
            yield return obj.inData1;
        }
    }

 }

  

public class ClassDisplayCalculator  : ClassFunctions
    {
            public void DisplayAddition(int tal1, int tal2)
            {
                Console.Write("Svar: {0} + {1} = ", tal1, tal2);
                Console.WriteLine(this.Add(tal1, tal2));
                Console.ReadLine();
            }

            public void DisplayDiv(int tal1, int tal2)
            {
                Console.Write("Svar: {0} / {1} = ", tal1, tal2);
                Console.WriteLine(this.Divide(tal1, tal2));
                Console.ReadLine();
            }

            public void DisplaySub(int tal1, int tal2)
            {
                Console.Write("Svar: {0} - {1} = ", tal1, tal2);
                Console.WriteLine(this.Substract(tal1, tal2));
                Console.ReadLine();
            }

            public void DisplayMultiplication(int tal1, int tal2)
            {
                Console.Write("Svar: {0} * {1} = ", tal1, tal2);
                Console.WriteLine(this.Multiply(tal1,tal2));
                Console.ReadLine();
               
            }

        public void DisplayMultipleIncome(string checkIncomeString)
        {
            int ifInteger;
            bool ifValid = checkIncomeString.Contains("q");

            if (ifValid){
                Console.Clear();
                Console.WriteLine("DU HAR VALT ATT AVSLUTA!");
            }
            else if (int.TryParse(checkIncomeString, out ifInteger)){
                this.AddtoList(ifInteger);
                Console.Clear();
            }
            else {
                Console.Clear();
                Console.WriteLine("Endast siffror!");
            }
    }
 }
}


